<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dramaku - Bioskop Mini</title>
    <style>
        /* Tampilan Mode Gelap ala Netflix */
        body { 
            background-color: #141414; 
            color: white; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            margin: 0; 
            padding: 0; 
        }
        h1 { 
            text-align: center; 
            margin-top: 20px; 
            color: #e50914; 
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        /* Grid Poster Film */
        .movie-grid { 
            display: flex; 
            flex-wrap: wrap; 
            justify-content: center; 
            gap: 20px; 
            padding: 20px; 
        }
        .movie-card { 
            width: 160px; 
            cursor: pointer; 
            transition: transform 0.3s; 
            background: #222;
            border-radius: 10px;
            padding-bottom: 10px;
        }
        .movie-card:hover { 
            transform: scale(1.08); 
            box-shadow: 0 0 15px rgba(229, 9, 20, 0.5);
        }
        .movie-card img { 
            width: 100%; 
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
        }
        .movie-card h3 { 
            font-size: 14px; 
            text-align: center; 
            margin: 10px 5px 0 5px; 
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Modal / Layar Tancap Iframe */
        #playerModal { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.95); 
            z-index: 1000; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
        }
        #playerModal iframe { 
            width: 90%; 
            max-width: 900px; 
            height: 50vw; 
            max-height: 500px; 
            border: 2px solid #e50914; 
            border-radius: 10px; 
            background: #000;
        }
        .close-btn { 
            position: absolute; 
            top: 20px; 
            right: 30px; 
            font-size: 40px; 
            color: #fff; 
            cursor: pointer; 
            font-weight: bold; 
            transition: color 0.3s;
        }
        .close-btn:hover { color: #e50914; }
    </style>
</head>
<body>

    <h1>üçø Dramaku üçø</h1>
    <p style="text-align: center; color: #888;">Film Bioskop Trending Hari Ini</p>
    
    <div class="movie-grid" id="movieGrid">
        <h3 style="color: white;">‚è≥ Menjemput data dari server TMDB...</h3>
    </div>

    <div id="playerModal">
        <span class="close-btn" onclick="closePlayer()">‚úñ</span>
        <iframe id="videoIframe" src="" allowfullscreen></iframe>
    </div>

    <script>
        // Kunci Rahasia Kamu
        const API_KEY = '5c9e36288ce1ccb6f161f613f06b190e';
        const BASE_URL = 'https://api.themoviedb.org/3';
        const IMG_URL = 'https://image.tmdb.org/t/p/w500';

        // Fungsi Menarik Film Trending (Update Otomatis Tiap Hari)
        async function getMovies() {
            try {
                // Minta data ke TMDB pakai Bahasa Indonesia
                const res = await fetch(`${BASE_URL}/trending/movie/day?api_key=${API_KEY}&language=id-ID`);
                const data = await res.json();
                tampilkanFilm(data.results);
            } catch (error) {
                document.getElementById('movieGrid').innerHTML = '<h3 style="color: red;">‚õî Gagal menyambung ke server TMDB. Coba lagi nanti!</h3>';
            }
        }

        // Fungsi Mencetak Poster Film ke Layar
        function tampilkanFilm(movies) {
            const grid = document.getElementById('movieGrid');
            grid.innerHTML = ''; // Bersihkan tulisan loading
            
            movies.forEach(movie => {
                if (movie.poster_path) {
                    const card = document.createElement('div');
                    card.className = 'movie-card';
                    card.onclick = () => playMovie(movie.id); // Pas diklik, putar filmnya
                    
                    card.innerHTML = `
                        <img src="${IMG_URL + movie.poster_path}" alt="${movie.title}">
                        <h3>${movie.title}</h3>
                    `;
                    grid.appendChild(card);
                }
            });
        }

        // JURUS IFRAME: Minta Video ke Server Gratisan
        function playMovie(tmdbId) {
            const modal = document.getElementById('playerModal');
            const iframe = document.getElementById('videoIframe');
            
            // Tembakan maut ke server Vidsrc (Penyedia Video LK21)
            iframe.src = `https://vidsrc.me/embed/movie?tmdb=${tmdbId}`;
            
            // Tampilkan Layar Bioskopnya
            modal.style.display = 'flex';
        }

        // Matikan Bioskop
        function closePlayer() {
            const modal = document.getElementById('playerModal');
            const iframe = document.getElementById('videoIframe');
            
            modal.style.display = 'none';
            iframe.src = ''; // Wajib dikosongin biar suara video gak bocor di background
        }

        // Nyalakan mesin saat aplikasi dibuka
        getMovies();
    </script>
</body>
</html>
