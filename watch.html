<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Mode</title>
    <style>
        body { margin: 0; background: #000; color: #0f0; font-family: monospace; padding: 20px; word-wrap: break-word; overflow-y: scroll; }
        h3 { color: yellow; border-bottom: 1px solid yellow; padding-bottom: 10px; }
        pre { white-space: pre-wrap; font-size: 12px; }
        .box { border: 1px solid #333; padding: 10px; margin-bottom: 20px; background: #111; }
    </style>
</head>
<body>

    <h3>üïµÔ∏è‚Äç‚ôÇÔ∏è DEBUG MODE (RONTGEN)</h3>
    <div id="status">Loading...</div>

    <div class="box">
        <strong>SAMPEL DATA EPISODE 1:</strong>
        <pre id="jsonResult">Menunggu Data...</pre>
    </div>

    <script>
        const params = new URLSearchParams(window.location.search);
        const bookId = params.get('id');
        const status = document.getElementById('status');
        const jsonResult = document.getElementById('jsonResult');

        // URL API DARI FILE PROBE KAMU
        const BASE_API = 'https://api.sansekai.my.id/api/dramabox/allepisode';

        async function debugAPI() {
            try {
                if (!bookId) throw new Error("ID Film Kosong di URL");

                status.innerText = "Membuka API untuk ID: " + bookId;
                
                // Tambahkan parameter lang=in sesuai script lama kamu
                const apiUrl = `${BASE_API}?bookId=${bookId}&lang=in`;
                
                const response = await fetch(apiUrl);
                const data = await response.json();

                // CARI ARRAY
                let episodes = [];
                if (Array.isArray(data)) episodes = data;
                else if (data.data && Array.isArray(data.data)) episodes = data.data;
                else if (data.result && Array.isArray(data.result)) episodes = data.result;

                if (episodes.length === 0) {
                    jsonResult.innerText = "ZONK! Array Kosong. API tidak kasih data episode.";
                    return;
                }

                status.innerText = `‚úÖ SUKSES! Ditemukan ${episodes.length} Episode.`;

                // TAMPILKAN ITEM PERTAMA SAJA (BIAR KITA TAU KEY-NYA APA)
                const sample = episodes[0];
                jsonResult.innerText = JSON.stringify(sample, null, 2);

            } catch (error) {
                status.innerText = "‚ùå ERROR FATAL";
                status.style.color = "red";
                jsonResult.innerText = error.message;
            }
        }

        debugAPI();
    </script>
</body>
</html>
